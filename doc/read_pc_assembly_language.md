# 《PC Assembly Language》读书笔记

## 前言

1. 8086处理器只支持实模式（real mode），不能满足安全、多任务等需求。

> Q：为什么实模式不安全、不支持多任务？为什么虚模式能解决这些问题？
> A: 以下是根据网上搜索结果及自己的理解做出的解答，有待斟酌。(1) 安全：实模式下用户可以访问任意的物理内存，可以修改系统程序或重要数据的内容，因而不安全。虚模式下用户能够访问的内存是由Descriptor Table中的信息决定的，其基地址是事先不确定的，而长度、权限均有限制，因此相比实模式更安全。(2) 多任务：多任务意味着CPU可以在不同任务之间切换，这要求不同任务之间的地址空间要相互隔离，否则从A任务切换到B任务时，B任务可能会修改A任务使用的内存数据。实模式不支持数据隔离，而虚模式支持。

2. 本书充分使用了两个开源软件：NASM汇编器和DJGPP C/C++编译器。

## 第1章 简介

1. 内存单位
----------- | ---------
word        | 2 bytes
double word | 4 bytes
quad word   | 8 bytes
paragraph   | 16 bytes

2. ASCII使用一个字节来对字符编码，而Unicode使用两个字节。

3. 8086 16-bit寄存器
    * AX/BX/CX/DX这四个16-bit的通用寄存器可以分解成两个8-bit的寄存器
    * SI和DI：index registers，通常用于指针，也可用于大多数通用寄存器可以使用的场景，但它们不能分解成8-bit的寄存器。
    * BP和SP寄存器用于指向机器语言栈里面的数据。
    * CS/DS/SS/ES：段寄存器。CS：Code Segment. DS: Data Segment. SS: Stack Segment. ES: Extra Segment.
    * IP寄存器和CS寄存器一起作为指示CPU将要执行的下一条指令的地址。每当执行完一条指令，IP将会指向下一条指令的地址。
    * FLAGS寄存器存储上一条指令的执行结果的重要信息。

4. 80386 32-bit寄存器
    * 相比8086，通用寄存器扩展到32-bit。为了后向兼容，AX仍然代表16-bit寄存器，而用EAX来代表扩展的32-bit寄存器。
    * 段寄存器仍然是16-bit，此外增加了两个备用的段寄存器FS和GS。

